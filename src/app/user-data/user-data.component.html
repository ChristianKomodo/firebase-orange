<ng-container *ngIf="modalOpen && movieDetailsResults">
  <div class="modal-backdrop" (click)="onModalClose()"></div>
  <section class="modal-box">
    <button
      class="modal-button top-right"
      (click)="onModalClose()"
      role="button"
    >
      Close
    </button>
    <h2 class="movie-headline">
      {{ movieDetailsResults.Title }}
      <small>{{ movieDetailsResults.Year }}</small>
    </h2>
    <img
      class="poster-large"
      [src]="movieDetailsResults.Poster"
      alt="Image of {{ movieDetailsResults.Title }} movie poster"
    />
    <p class="accent">{{ movieDetailsResults.Genre }}</p>
    <p *ngIf="movieDetailsResults.Type == 'movie'">
      Directed by
      <span class="accent"> {{ movieDetailsResults.Director }}</span>
    </p>
    <p class="plot">{{ movieDetailsResults.Plot }}</p>
    <p>
      Starring
      <span class="accent"> {{ movieDetailsResults.Actors }}</span>
    </p>
    <div *ngIf="movieDetailsResults.Type == 'series'">
      <p>
        Total Seasons:
        <span class="accent">{{ movieDetailsResults.totalSeasons }}</span>
      </p>
      <p *ngIf="movieDetailsResults.Writer != 'N/A'">
        Written by
        <span class="accent"> {{ movieDetailsResults.Writer }}</span>
      </p>
    </div>
    <p class="awards">
      Awards: <span class="accent"> {{ movieDetailsResults.Awards }}</span>
    </p>
    <p class="ratings-heading">Ratings:</p>
    <ul class="ratings">
      <li *ngFor="let rating of movieDetailsResults.Ratings">
        &nbsp; &nbsp;{{ rating.Source }}:
        <span class="accent">{{ rating.Value }}</span>
      </li>
    </ul>
    <button
      class="modal-button"
      (click)="onAddMovie(movieDetailsResults)"
      role="button"
    >
      Add Movie to Favorites
    </button>
  </section>
</ng-container>

<section>
  <h1 *ngIf="someMovies.length; else noFavorites">Favorite Movies</h1>
  <ng-template #noFavorites>
    <p>You have no movies saved to your Favorites</p>
  </ng-template>

  <div
    class="movie-container"
    *ngFor="let movie of someMovies"
    [class.fade-out]="movie.imdbID === movieToRemove"
  >
    <div class="movie-title">{{ movie.Title }}</div>
    <div class="movie-year">{{ movie.Year }}</div>
    <div
      class="movie-box"
      [style.background-image]="'url(' + movie.Poster + ')'"
    ></div>
    <button
      class="movie-button"
      (click)="onMovieSearchDetails(movie.imdbID)"
      role="button"
    >
      Movie Details
    </button>
    <button class="movie-button" (click)="onRemoveMovie(movie)" role="button">
      Remove
    </button>
  </div>
</section>

<section class="box form-box">
  <div class="search-container">
    <h1>IMDB Movie Search</h1>
    <form [formGroup]="movieSearchForm" class="movie-form">
      <div class="field">
        <label for="title">Movie Title</label>
        <input
          id="title"
          type="text"
          formControlName="title"
          placeholder="Type a movie title"
        />
        <small
          class="error"
          *ngIf="
            movieSearchForm.get('title')?.touched &&
            movieSearchForm.get('title')?.invalid
          "
        >
          A Movie Title is required
        </small>
      </div>
      <button class="search-button" (click)="onMovieSearch()">Search</button>
    </form>
    <p class="message">{{ message }}</p>
  </div>

  <h2 *ngIf="movieSearchResults.length" #searchResults>Search Results</h2>

  <ng-container>
    <div class="movie-container" *ngFor="let movie of movieSearchResults">
      <div class="movie-title">{{ movie.Title }}</div>
      <div class="movie-year">{{ movie.Year }}</div>
      <div
        class="movie-box"
        [style.background-image]="'url(' + movie.Poster + ')'"
      ></div>
      <button
        class="movie-button"
        (click)="onMovieSearchDetails(movie.imdbID)"
        role="button"
      >
        Movie Details
      </button>
      <button class="movie-button" (click)="onAddMovie(movie)" role="button">
        Add Movie
      </button>
    </div>
  </ng-container>
</section>
